Starting Container
[2025-11-23 07:25:42 +0000] [1] [INFO] Starting gunicorn 21.2.0
[2025-11-23 07:25:42 +0000] [1] [INFO] Listening at: http://0.0.0.0:8080 (1)
[2025-11-23 07:25:42 +0000] [1] [INFO] Using worker: gthread
[2025-11-23 07:25:42 +0000] [4] [INFO] Booting worker with pid: 4
[2025-11-23 07:25:42 +0000] [5] [INFO] Booting worker with pid: 5
[2025-11-23 07:25:42 +0000] [6] [INFO] Booting worker with pid: 6
[2025-11-23 07:25:42 +0000] [7] [INFO] Booting worker with pid: 7
âœ“ Lambda client module imported successfully
âœ… Tasks module imported successfully
âœ… Celery configured with broker: redis.railway.internal:6379
ğŸ“§ Email sending: ENABLED (SEND_EMAILS=true)
ğŸ”’ Privacy mode: ENABLED (metadata logging disabled)
âœ“ Lambda client module imported successfully
ğŸ”’ Privacy mode: ENABLED (metadata logging disabled)
âœ… App initialized (database connection and migrations will happen on first request)
âœ… Celery configured with broker: redis.railway.internal:6379
ğŸ“§ Email sending: ENABLED (SEND_EMAILS=true)
âœ… Tasks module imported successfully
âœ… App initialized (database connection and migrations will happen on first request)
âœ“ Lambda client module imported successfully
âœ“ Lambda client module imported successfully
âœ… Tasks module imported successfully
âœ… Celery configured with broker: redis.railway.internal:6379
ğŸ“§ Email sending: ENABLED (SEND_EMAILS=true)
ğŸ”’ Privacy mode: ENABLED (metadata logging disabled)
âœ… Tasks module imported successfully
âœ… Celery configured with broker: redis.railway.internal:6379
ğŸ“§ Email sending: ENABLED (SEND_EMAILS=true)
ğŸ”’ Privacy mode: ENABLED (metadata logging disabled)
âœ… App initialized (database connection and migrations will happen on first request)
âœ… App initialized (database connection and migrations will happen on first request)
âœ… Lazy migrations completed
âœ… Successfully created Gmail client for user 42
âœ… Lazy migrations completed
âœ… Lazy migrations completed
âœ… Lazy migrations completed
âœ… Successfully created Gmail client for user 42
ğŸ”„ Incremental sync: Fetching all new emails (no limit)
ğŸ”„ Using incremental sync from history ID: 955357 (fetching ALL new emails, no limit)
âœ… Incremental sync: No changes since last sync. historyId: 955360
ğŸ’¾ Stored new historyId: 955360
ğŸ”„ Incremental sync found no new emails. Checking if history_id is stale...
âš ï¸  History_id is stale! Stored: 955357, Current: 955360
   Updating history_id and triggering background sync to fetch new emails...
âœ… Background sync triggered with updated history_id: a3ee6582-9148-4b26-8838-028da0ab64f7
âœ“ Moonshot (Kimi) client initialized
âœ“ Lambda client initialized
ğŸ“‚ Loading all classified emails from database...
   (Ignoring 'unread_only' filter - database doesn't track read status)
   Loading all emails from database
â­ Fetched star status for 115 emails from Gmail
âœ… Returning 200 emails from database
âœ… Successfully created Gmail client for user 42
ğŸ”„ Incremental sync: Fetching all new emails (no limit)
ğŸ”„ Using incremental sync from history ID: 955360 (fetching ALL new emails, no limit)
âœ… Incremental sync: No changes since last sync. historyId: 955360
ğŸ’¾ Stored new historyId: 955360
ğŸ”„ Incremental sync found no new emails. Checking if history_id is stale...
âœ… History_id is current (955360). No new emails.
âœ“ Moonshot (Kimi) client initialized
âœ“ Lambda client initialized
ğŸ“‚ Loading all classified emails from database...
   (Ignoring 'unread_only' filter - database doesn't track read status)
âœ… Successfully created Gmail client for user 42
âœ… Fetched 1 messages from thread with 1 API call (no extra calls)
   Loading all emails from database
â­ Fetched star status for 179 emails from Gmail
âœ… Returning 200 emails from database
âœ… Successfully created Gmail client for user 42
   âš ï¸  Could not retrieve from Secrets Manager: An error occurred (AccessDeniedException) when calling the GetSecretValue operation: User: arn:aws:i
   ğŸ”‘ Using Moonshot API key from environment variables (key starts with: sk-JBMWmry...)
ğŸ“„ Using Moonshot to extract PDF content: Route - Pitch Deck_251123_022014.pdf
   ğŸ“¤ Uploading PDF to Moonshot...
âœ… Successfully created Gmail client for user 42
âœ… Fetched 1 messages from thread with 1 API call (no extra calls)
   ğŸ“¥ Extracting content from Moonshot...
   âœ… Successfully extracted 11603 characters from PDF using Moonshot
âœ… Fetched 1 messages from thread with 1 API call (no extra calls)
âœ… Successfully created Gmail client for user 42
âœ… Fetched 1 messages from thread with 1 API call (no extra calls)
âœ… Successfully created Gmail client for user 42
âœ… Fetched 1 messages from thread with 1 API call (no extra calls)
âœ… Successfully created Gmail client for user 42
âœ… Fetched 1 messages from thread with 1 API call (no extra calls)
âœ… Successfully created Gmail client for user 42
âœ… Fetched 1 messages from thread with 1 API call (no extra calls)
âœ… Successfully created Gmail client for user 42
âœ… Fetched 1 messages from thread with 1 API call (no extra calls)
âœ… Successfully created Gmail client for user 42
   âš ï¸  Could not retrieve from Secrets Manager: An error occurred (AccessDeniedException) when calling the GetSecretValue operation: User: arn:aws:i
   ğŸ”‘ Using Moonshot API key from environment variables (key starts with: sk-JBMWmry...)
ğŸ“„ Using Moonshot to extract PDF content: Pitch_Deck Bidaal_Tech_Seed (1)_251122_164425.pdf
   ğŸ“¤ Uploading PDF to Moonshot...
âœ… Successfully created Gmail client for user 42
   âš ï¸  Could not retrieve from Secrets Manager: An error occurred (AccessDeniedException) when calling the GetSecretValue operation: User: arn:aws:i
   ğŸ”‘ Using Moonshot API key from environment variables (key starts with: sk-JBMWmry...)
ğŸ“„ Using Moonshot to extract PDF content: Sumosave_Pitchdeck_capitalCORN_251122_170344.pdf
   ğŸ“¤ Uploading PDF to Moonshot...
   ğŸ“¥ Extracting content from Moonshot...
   âœ… Successfully extracted 6665 characters from PDF using Moonshot
âœ… Fetched 1 messages from thread with 1 API call (no extra calls)
   ğŸ“¥ Extracting content from Moonshot...
   âœ… Successfully extracted 11339 characters from PDF using Moonshot
âœ… Fetched 1 messages from thread with 1 API call (no extra calls)
âœ… Successfully created Gmail client for user 42
   âš ï¸  Could not retrieve from Secrets Manager: An error occurred (AccessDeniedException) when calling the GetSecretValue operation: User: arn:aws:i
   ğŸ”‘ Using Moonshot API key from environment variables (key starts with: sk-JBMWmry...)
ğŸ“„ Using Moonshot to extract PDF content: Route - Pitch Deck_251123_022014.pdf
   ğŸ“¤ Uploading PDF to Moonshot...
âœ… Successfully created Gmail client for user 42
âœ… Fetched 1 messages from thread with 1 API call (no extra calls)
   ğŸ“¥ Extracting content from Moonshot...
   âœ… Successfully extracted 11603 characters from PDF using Moonshot
âœ… Fetched 1 messages from thread with 1 API call (no extra calls)
âœ… Successfully created Gmail client for user 42
âœ… Fetched 1 messages from thread with 1 API call (no extra calls)
âœ… Successfully created Gmail client for user 42
âœ… Fetched 1 messages from thread with 1 API call (no extra calls)
âœ… Successfully created Gmail client for user 42
   âš ï¸  Could not retrieve from Secrets Manager: An error occurred (AccessDeniedException) when calling the GetSecretValue operation: User: arn:aws:i
   ğŸ”‘ Using Moonshot API key from environment variables (key starts with: sk-JBMWmry...)
ğŸ“„ Using Moonshot to extract PDF content: Route - Pitch Deck_251123_022014.pdf
   ğŸ“¤ Uploading PDF to Moonshot...
âœ… Successfully created Gmail client for user 42
âœ… Fetched 1 messages from thread with 1 API call (no extra calls)
   âœ… Successfully extracted 11603 characters from PDF using Moonshot
âœ… Fetched 1 messages from thread with 1 API call (no extra calls)
   ğŸ“¥ Extracting content from Moonshot...
âœ… Successfully created Gmail client for user 42
ğŸ”„ Incremental sync: Fetching all new emails (no limit)
ğŸ”„ Using incremental sync from history ID: 955360 (fetching ALL new emails, no limit)
ğŸ”„ Incremental sync: Found 1 new messages. Fetching details...
âœ… Incremental sync: Fetched 1 new emails, 0 deleted with 2 API calls. historyId: 955414
ğŸ’¾ Stored new historyId: 955414
âœ“ Lambda client initialized
ğŸ“‚ Loading all classified emails from database...
   (Ignoring 'unread_only' filter - database doesn't track read status)
   Loading all emails from database
â­ Fetched star status for 115 emails from Gmail
âœ… Returning 201 emails from database
